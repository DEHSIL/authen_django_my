{% extends 'base.html' %}

{% load cart_filters %}

{% load static %}

{% block title %}
    СТИВДЖОБС АРХИВ
{% endblock %}

{% block cart_total %}
{{ total_carts_product }}
{% endblock %}

{% block con %}
    <h2 class="text-center">Главная страница</h2>  
    <hr>  
    <div style="width: 100%; display: flex; flex-wrap: wrap; justify-content: center;">
        {% for product in data %}
        <div class="shadow-sm p-3 bg-body rounded rounded-2 border border-light border-2 btn-light" style="text-decoration: none; cursor: pointer; margin: 10px; display: flex; flex-direction: column;">
            <a href="{% url 'product_detail' product.id %}" style="text-decoration: none;">
                <div style="width: 250px; height: 250px; ">
                    <img src="{{ product.image.url }}" alt="" style="height: 250px; width: 250px;; object-fit:cover;"/>
                </div>
                <div class="text-dark d-flex justify-content-between" style="width: 250px;">
                    <div class="">
                        <h3  style="margin-top: 5px; color: black;">{{ product.name }}</h3>
                        <h4 style=" color: rgb(13, 110, 253);">{{ product.price }}</h4>
                    </div>
                    {% if user.is_authenticated %}
                    {% with favorite_product|cart_filters:product.id as item %}
                            <a class="mt-3 me-3" href="{% url 'add_to_favorites' product.id %}" style="height: 50px; width: 50px;">
                                {% if item %} 
                                <img src="{% static 'img/heart_blue.png' %}" alt="">
                                {% else %}
                                <img src="{% static 'img/heart.png' %}" alt="">
                                {% endif %}
                            </a>
                    {% endwith %}
                    {% endif %}
                </div>
            </a> 
            <p class="text-secondary" style="flex: 1 1 auto; width: 250px; padding-left: 8px; margin-bottom: 10; overflow-wrap: break-word; display: -webkit-box; -webkit-line-clamp: 2;-webkit-box-orient: vertical;overflow: hidden; line-height: 160%;">{{ product.description }}</p>
            {% if user.is_authenticated %}
                <div class="d-flex justify-content-around text-center align-items-center" style="background-color: rgb(212, 220, 244); border-radius: 10px; padding: 4px;">
                    {% with carts_product|cart_filters:product.id as cart_item %}
                    {% if cart_item %}    
                        <a style="text-decoration: none; width: 30px; padding: 3px; font-weight: 700; font-size: 25px;" href="{% url 'remove_from_cart' cart_item.id %}">-</a> 
                        <span>{{ carts_product|cart_quantity:product }}</span>
                        <a style="text-decoration: none; width: 30px; padding: 3px; font-weight: 700; font-size: 20px;" href="{% url 'add_to_cart' product.id %}">+</a>  
                    {% else %}  
                        <a style=" text-decoration: none;  padding: 9px; font-weight: 600; font-size: 17px;" href="{% url 'add_to_cart' product.id %}">Добавить в корзину</a>
                    {% endif %} 
                    {% endwith %}
                </div>
            {% endif %}
        </div>
        {% endfor %} 
    </div>
    <div class="text-center m-5">
        {% if page_obj.has_previous %}
            <a href="?page=1" style="text-decoration: none;">Первая</a>
            <a href="?page={{ page_obj.previous_page_number }}" style="text-decoration: none;">Назад</a>
        {% endif %}
    
        <span>Страница {{ page_obj.number }} из {{ page_obj.paginator.num_pages }}</span>
    
        {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}" style="text-decoration: none;">Вперед</a>
            <a href="?page={{ page_obj.paginator.num_pages }}" style="text-decoration: none;">Последняя</a>
        {% endif %}
    </div>
    <hr>
    <p style="margin-top: 40px;">Как принято считать, представители современных социальных резервов объявлены нарушающими общечеловеческие нормы этики и морали. Значимость этих проблем настолько очевидна, что внедрение современных методик предполагает независимые способы реализации соответствующих условий активизации. В своём стремлении повысить качество жизни, они забывают, что дальнейшее развитие различных форм деятельности выявляет срочную потребность вывода текущих активов.

        Повседневная практика показывает, что понимание сути ресурсосберегающих технологий требует определения и уточнения своевременного выполнения сверхзадачи. Мы вынуждены отталкиваться от того, что синтетическое тестирование говорит о возможностях кластеризации усилий.
        
        Сложно сказать, почему действия представителей оппозиции, инициированные исключительно синтетически, в равной степени предоставлены сами себе. Вот вам яркий пример современных тенденций — высокотехнологичная концепция общественного уклада способствует подготовке и реализации распределения внутренних резервов и ресурсов.
        
        Но понимание сути ресурсосберегающих технологий позволяет оценить значение распределения внутренних резервов и ресурсов. Задача организации, в особенности же курс на социально-ориентированный национальный проект обеспечивает актуальность переосмысления внешнеэкономических политик! Таким образом, постоянное информационно-пропагандистское обеспечение нашей деятельности позволяет выполнить важные задания по разработке благоприятных перспектив.
        
        Наше дело не так однозначно, как может показаться: высокотехнологичная концепция общественного уклада однозначно определяет каждого участника как способного принимать собственные решения касаемо распределения внутренних резервов и ресурсов. В рамках спецификации современных стандартов, независимые государства функционально разнесены на независимые элементы.
        
        Сложно сказать, почему интерактивные прототипы описаны максимально подробно. Но сторонники тоталитаризма в науке неоднозначны и будут объявлены нарушающими общечеловеческие нормы этики и морали. Учитывая ключевые сценарии поведения, убеждённость некоторых оппонентов играет важную роль в формировании глубокомысленных рассуждений. Как уже неоднократно упомянуто, многие известные личности набирают популярность среди определенных слоев населения, а значит, должны быть смешаны с не уникальными данными до степени совершенной неузнаваемости, из-за чего возрастает их статус бесполезности. Банальные, но неопровержимые выводы, а также ключевые особенности структуры проекта объединены в целые кластеры себе подобных. Как принято считать, тщательные исследования конкурентов и по сей день остаются уделом либералов, которые жаждут быть представлены в исключительно положительном свете.
    </p>
{% endblock %}
